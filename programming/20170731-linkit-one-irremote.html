<!DOCTYPE HTML>
<html>
<head >
  <meta charset="utf-8">
  
  <title>Linkit One 空调遥控器 | VikingWarlock | VKWK&#39;s blog</title>

  
  <meta name="author" content="Viking Warlock">
  

  
  <meta name="description" content="just play play">
  

  
  
  <meta name="keywords" content="Arduino">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="Linkit One 空调遥控器"/>

  <meta property="og:site_name" content="VikingWarlock"/>

  
  <meta property="og:image" content="/hexosource/favicon.ico"/>
  
  
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-5005349780815724",
    enable_page_level_ads: true
  });
</script>

  
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?223eea22355699157e147870eb124b24";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
})();
</script>


  <link rel="manifest" href="/manifest.json">
  <link href="/hexosource/favicon.ico" rel="icon">

  <link rel="alternate" href="/hexosource/atom.xml" title="VikingWarlock" type="application/atom+xml">
  <link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/hexosource/css/base/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/hexosource/css/style.css" media="screen" type="text/css">


<meta name="generator" content="Hexo 5.3.0"></head>


<body>
<div class="blog">
  <div class="content">

    

    <header class="header-container" style="background-image: url('/images/blog-bg.jpg');">


<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header page-scroll">
          <button type="button" id="tglBtn" class="navbar-toggle">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Viking Warlock</a>
        </div>
        <div id="bosenyblog-navbar">
          <div class="navbar-collapse" id="bs-example-navbar-collapse-6">
            <ul class="nav navbar-nav navbar-right">
            
              <li><a href="/hexosource/">主页</a></li>
            
              <li><a href="/hexosource/archives">归档</a></li>
            
              <li><a href="/hexosource/about">关于</a></li>
            
              <li><a href="/hexosource/tags">标签</a></li>
            
            </ul>
          </div>
        </div>

    </div>
 </nav>
 <div class="gotop-btn">

 </div>
</header>

        
          <div class="container ">
          <div class="row">
            <main class="site-main posts-loop col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container" style="position: inherit;">
            <article class="article-container ">

  
    
    <h3 class="article-title"><span>Linkit One 空调遥控器</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/hexosource/programming/20170731-linkit-one-irremote.html" rel="bookmark">
        <time class="entry-date published" datetime="2017-07-31T14:36:18.000Z">
          2017-07-31
        </time>
      </a>
    </span>
    <br />
    
    <span id="busuanzi_container_page_pv">
      本文总阅读量<span id="busuanzi_value_page_pv"></span>次
    </span>
    
  </div>


  

  <div class="article-content">
    <div class="entry">
      
          <h3 id="使用linkit-one-控制空调"><a href="#使用linkit-one-控制空调" class="headerlink" title="使用linkit one 控制空调"></a>使用linkit one 控制空调</h3><p>这一篇会比较长,会写很多踩过的坑,一些知识,弯路,废话.</p>
<p>如果你想直接看结果,可以直接看小标题<code>Release</code></p>
<h4 id="Context"><a href="#Context" class="headerlink" title="Context"></a>Context</h4><p>这夏天真是热,虽然成都比杭州的温度低7-10度,但是相比较舒适的22-25度来说,还是比较燥热的.</p>
<p>所以空调肯定是要开的.</p>
<p>可是,一直开会比较冷,开一会儿关掉又会比较热,即使空调有定时开定时关的功能,那这个操作在睡觉期间,只能做一次.它并不能智能的开关开关开关……</p>
<p>但是,自己做一个遥控器,就可以啊！</p>
<p>于是就开始着手搞这个了！</p>
<h4 id="My-Limitation"><a href="#My-Limitation" class="headerlink" title="My Limitation"></a>My Limitation</h4><p>我是个纯种的程序员,虽然说数电学的还不错,但是模电基本上都忘光了.所以要我画画板子,计算机算电阻电容,那我还不如直接放弃算了～</p>
<p>之前玩过Arduino,所以我对Arduino还算有点儿了解,所以肯定就选择这个平台了.</p>
<p>因为我们公司自己的智能硬件大部分都涉及到低功耗蓝牙,所以我觉得用蓝牙来进行互动对我来说开发起来也比较方便,所以我就选择了之前参加比赛骗来的Linkit One开发版.它自带了蓝牙、Wifi、GPS、GSM模块<code>(一波广告)</code></p>
<h4 id="Requirements"><a href="#Requirements" class="headerlink" title="Requirements"></a>Requirements</h4><p>DHT22温湿度传感器,IR发射器,IR接收器.</p>
<p>面包版,线,线,线,线,线…</p>
<p>Linkit One,Arduino开发环境, Linkit One SDK.</p>
<h4 id="Knowledge"><a href="#Knowledge" class="headerlink" title="Knowledge"></a>Knowledge</h4><p><code>以下内容基本上是摸索过程中学的,因为我一开始并没有觉得这个东西会那么的复杂</code></p>
<h5 id="遥控器和空调的通信"><a href="#遥控器和空调的通信" class="headerlink" title="遥控器和空调的通信"></a>遥控器和空调的通信</h5><p>一查就知道,他们用一个叫做38khz红外来通信.</p>
<p>那么38khz红外是个啥玩意儿呢？</p>
<p>先上图</p>
<p><img src="http://vvk.ixuanlun.com/linkit_one_irsignal.gif" alt="irsignal"></p>
<p>就是发射器在一定的时间内通过亮灭亮灭的快速切换来发送0,1,0,1</p>
<p>比如说 载波发射0.56ms,不发射0.56ms表示数字信号”0”;载波发射0.56ms,不发射1.68ms表示数字信号”1”</p>
<p>上面说的这个操作只是个<code>例子</code>,不代表所有的空调,电视什么的都用这种方式来表示0和1.</p>
<h5 id="Arduino"><a href="#Arduino" class="headerlink" title="Arduino"></a>Arduino</h5><p>这个怎么解释呢？</p>
<p>举个例子吧～</p>
<p>单片机工作起来就是在永远循环执行一个代码块儿.</p>
<p>在Arduino中有<code>void loop()</code>这个函数,在这个函数中把要循环做的事情放进去,就可以让它正常工作了.</p>
<p>比如说把某一个引脚置为高电平,只要简单的写一句<code>DigitalWrite(Pin Number,HIGH);</code>就OK了</p>
<p>读取某个引脚的点平值,只要简单的写一句<code>DigitalRead(Pin Number);</code>就OK了</p>
<p>差不多就这么个操作,基本上不用考虑什么中断、分片、多线程之类的东西</p>
<h5 id="发送指令＊"><a href="#发送指令＊" class="headerlink" title="发送指令＊"></a>发送指令＊</h5><p>虽然我们知道了如何让IR发射器发送红外信号,但是我们依然不知道这个空调的发射指令是什么～</p>
<p>这个学习指令几年前在机顶盒遥控器上面,就见过了.在拥有了IR接收器之后,他的原理其实蛮简单的.</p>
<p>IR接收器在收到高低点平切换的时候,记录一下时间,就可以知道发射端高低信号的持续时间了.</p>
<p>比如说:</p>
<p>我抓到的关机指令</p>
<pre><code>4360,4410,477,2205,237,266,520,1678,514,1734,484,693,367,527,533,1767,479,735,370,482,539,1956,309,491,630,550,477,2208,2234,473,532,1748,482,563,515,1585,1065,1449,281,1590,1090,1402,347,461,539,2139,208,1542,506,2262,185,283,769,343,536,516,551,522,942,1422,420,512,556,513,1150,1339,331,1584,544,1762,552,430,581,496,565,1133,198,316,846,266,539,489,574,526,807,339,531,1694,503,1729,517,1614,521,1753,456,1645,522,5371,4506,4419,463,1699,726,292,531,1601,838,1442,524,476,576,508,1098,1414,279,501,567,514,1063,1484,309,466,555,510,557,1766,693,1394,538,1135,205,1455,511,503,547,1773,450,1674,517,1719,480,1634,555,486,562,1736,535,1564,540,1758,737,288,499,520,553,540,822,339,522,1663,532,504,1096,200,381,1680,509,1762,436,1650,524,505,571,1044,205,389,753,322,560,527,565,1199,190,260,789,334,512,1625,903,1428,434,1599,1139,1335,316,1592,559
</code></pre><p>开机指令</p>
<pre><code>4385,4385,471,1690,447,579,527,1600,996,1236,548,498,584,490,8521,561,106,171,65,62,61,64,67,58,62,450,226,562,504,1590,571,528,722,1503,546,1593,839,312,555,481,571,1630,583,1695,528,1577,572,1693,516,1589,560,518,658,1564,553,1582,753,405,535,524,591,491,571,511,771,410,497,1621,563,1747,514,466,579,1601,567,726,457,459,537,509,627,491,557,531,653,473,527,1620,609,489,852,1388,518,1776,437,1712,485,1740,441,5368,4596,4410,400,1570,553,523,556,1700,567,1552,569,526,809,351,491,1634,554,528,560,621,506,1597,594,493,592,786,360,1571,572,1590,657,463,554,1599,566,1721,502,535,549,513,563,1701,506,1607,562,1771,463,1596,552,1806,458,474,580,1582,556,1709,500,510,567,522,558,536,820,320,534,525,564,1611,584,1677,526,488,561,1874,338,519,565,517,569,512,575,520,660,479,547,523,560,1618,735,377,564,1606,576,1685,520,1619,557,1721,505
</code></pre><p>有了这一坨数据,后面只要控制IR发射器Data引脚*,就可以发送红外指令了！</p>
<h5 id="PWM-脉冲宽度调制"><a href="#PWM-脉冲宽度调制" class="headerlink" title="PWM(脉冲宽度调制)"></a>PWM(脉冲宽度调制)</h5><p>嗯,这个东西我琢磨了会儿才明白.</p>
<p>一开始我一直不明白,我要这玩意儿干嘛.</p>
<p>引用百度百科里面的解释: <code>脉冲宽度调制是利用微处理器的数字输出来对模拟电路进行控制的一种非常有效的技术,广泛应用在从测量、通信到功率控制与变换的许多领域中.</code></p>
<p>不过后面在<code>pj大佬</code>的教导下,我明白了它的意思,简单说就是我要发高电平,就发PWM波；我要发低点平,就不发PWM波.这看起来和AM调制一样,不同的是AM调制是对一个模拟信号进行调制；而我这里用到的是对数字信号进行调制.</p>
<p>我就假设我说明白了～</p>
<h4 id="Dev"><a href="#Dev" class="headerlink" title="Dev"></a>Dev</h4><p>对于DHT和蓝牙的开发我就不多写了,因为真的蛮简单的,也没什么大坑.最多吐槽一下Linkit One这个板子对BLE蓝牙的限制吧～这家伙不能修改广播数据(改不了名字、服务UUIDs、制造商数据……),而且外设模式下Notify貌似是没有用的～</p>
<p>好嘞,蓝牙和温湿度都讲完了！下面可以一心一意的讲IR发射的坑了.</p>
<h5 id="Arduino-IRRemote"><a href="#Arduino-IRRemote" class="headerlink" title="Arduino-IRRemote"></a>Arduino-IRRemote</h5><p>在我真正开始这个项目的之前,我做了一些估计.查了我需要的各种模块的开发难度,找找有没有什么可以用的库可以直接调用.</p>
<p><a href="https://github.com/adafruit/DHT-sensor-library" target="_blank" rel="noopener">DHT温湿度传感器</a></p>
<p><a href="https://github.com/z3t0/Arduino-IRremote" target="_blank" rel="noopener">IR发射接收</a></p>
<p><a href="https://github.com/WiserUFBA/ArduMideaWrapper" target="_blank" rel="noopener">美的空调Arduino发射接收</a></p>
<p>我找到了这三个库,觉得这个项目在元件齐全了之后大概只要一个下午就可以搞定了.</p>
<p>于是,收到IR发射器之后,我就迫不及待的开工了！</p>
<pre><code>~~~/Arduino/libraries/IRremote/irISR.cpp:18:5: error: expected constructor, destructor, or type conversion before &apos;(&apos; token
ISR (TIMER_INTR_NAME)
</code></pre><p>编译错误！我溯源找到了这个类,发现了ISR()这个函数,并没有写他的来源,说明这个函数可能是板子自带的.于是我就用Arduino UNO来编译相同的代码,编译通过！</p>
<p>天啦噜,Arduino-IRRemote这个库是不支持Linkit One的！</p>
<p>吓得我赶紧去看看那个直接发美的空调指令的库,这个库,<code>也是调用Arduino-IRRemote的</code>！</p>
<h5 id="异想天开的做法"><a href="#异想天开的做法" class="headerlink" title="异想天开的做法"></a>异想天开的做法</h5><p>然后我就把发射代码搞出来,放到了Arduino UNO上面来运行.竟然可以成功的关闭空调了！</p>
<p>于是我陷入了深深的沉思～</p>
<p>难道说,我得用两颗单片机来做这个简单的小玩意儿？？</p>
<p>说实话,我真的这么折腾了一段时间,效果和想象中的并不一样,这可能和模拟电路的知识有关～</p>
<h5 id="手动生成PWM！"><a href="#手动生成PWM！" class="headerlink" title="手动生成PWM！"></a>手动生成PWM！</h5><p>回到原始的方法,我开始理解IRRemote发送数据的工作原理</p>
<p>发送原始数据</p>
<pre><code>void  IRsend::sendRaw (unsigned int buf[],  int len,  int hz)
{
    // Set IR carrier frequency
    enableIROut(hz);

    for (int i = 0;  i &lt; len;  i++) {
        if (i &amp; 1)  space(buf[i]) ;
        else        mark (buf[i]) ;
    }

    space(0);  // Always end with the LED off
}
</code></pre><p>这好像是发高电平</p>
<pre><code>void  IRsend::mark (int time)
{
    TIMER_ENABLE_PWM; // Enable pin 3 PWM output
    if (time &gt; 0) delayMicroseconds(time);
}
</code></pre><p>这好像是发低电平</p>
<pre><code>void  IRsend::space (int time)
{
    TIMER_DISABLE_PWM; // Disable pin 3 PWM output
    if (time &gt; 0) delayMicroseconds(time);
}
</code></pre><p>这就当作是配置PWM的频率吧</p>
<pre><code>void  IRsend::enableIROut (int khz)
{
    // Disable the Timer2 Interrupt (which is used for receiving IR)
    TIMER_DISABLE_INTR; //Timer2 Overflow Interrupt

    pinMode(TIMER_PWM_PIN, OUTPUT);
    digitalWrite(TIMER_PWM_PIN, LOW); // When not sending PWM, we want it low
    TIMER_CONFIG_KHZ(khz);
}
</code></pre><p>在<code>TIMER_DISABLE_PWM</code>、<code>TIMER_ENABLE_PWM</code>里面调用了很多和ISR,PWM有关的东西,所以这里开始就要重新了</p>
<p>先写个高电平</p>
<pre><code>void mark(int time){
    int t=0;
    boolean isHigh=false;
    while(t&lt;=time){
        isHigh=!isHigh;
        t+=enable_pwm(isHigh);
    }
}

int enable_pwm(boolean high){
    if(high){
        digitalWrite(3,HIGH);
    }else{
        digitalWrite(3,LOW);
    }
    delayMicroseconds(13);
    return 13;
}
</code></pre><p>通过计算38khz的一个周期是26微秒,所以我们13微秒就要转换一次电平～</p>
<p>再写个低电平</p>
<pre><code>void space(int time){
    digitalWrite(3,LOW);
    delayMicroseconds(time);
}
</code></pre><p>这个不需要发转电平,所以就轻松一些了～</p>
<p>由于我已经固定了13微秒转换一次,所以也不用实现enableIROut(int khz)这个函数了.</p>
<p>运行！编译通过！发送！IR接收机采集到了IR信号！可是～空调好像没反应～</p>
<h5 id="还有这种操作"><a href="#还有这种操作" class="headerlink" title="还有这种操作"></a>还有这种操作</h5><p>气氛一度很尴尬,不过我毕竟只是个普通人,看不到发送的数据长什么样子,所以在<code>添哥大佬</code>的帮助下我使用了高档示波器</p>
<p>这是空调遥控器发出的信号在接受端的样子</p>
<p><img src="http://vvk.ixuanlun.com/linkit_one_need_signal1.jpeg" alt="right signal"></p>
<p>这是我发出的信号在接受端的样子</p>
<p><img src="http://vvk.ixuanlun.com/linkit_one_need_signal2.jpeg" alt="error signal"></p>
<p>这<code>尖峰</code>哪儿来的？</p>
<p>检查代码真的没有问题,这个异常我只能归结为硬件问题了,要知道linkit one是一个很高级,很牛逼的硬件,它甚至有多线程的操作,所以,它会不会强行的我把我操作所在的线程给中断了呢？又或者linkit one并没有能力做那么高频的电平转换.</p>
<h5 id="analogWriteAdvance"><a href="#analogWriteAdvance" class="headerlink" title="analogWriteAdvance"></a>analogWriteAdvance</h5><p>气氛再一度尴尬,不过<code>添哥大佬</code>在官方文档的<code>Analog I/O</code>中找到了<code>analogWriteAdvance()</code>这个函数！</p>
<pre><code>void analogWriteAdvance(
uint32_t pin, 
uint32_t sourceClock, 
uint32_t clockDivider, 
uint32_t cycle, 
uint32_t dutyCycle
);
</code></pre><p>而他的例子里面就是生成了一个PWM波！</p>
<p>在经过<code>不</code>简单的计算之后,我改写了PWM波的生成和暂停</p>
<pre><code>//Enable 38khz PWM
analogWriteAdvance(PWM_PIN,PWM_SOURCE_CLOCK_13MHZ,PWM_CLOCK_DIV1,342,171);
//Disable 38khz PWM
analogWriteAdvance(PWM_PIN,PWM_SOURCE_CLOCK_13MHZ,PWM_CLOCK_DIV1,342,0);
</code></pre><p>编译上传运行,<code>滴</code>,空调开了～(由于这是在公司做的,所以信号序列也是公司空调的序列,所以回到寝室,还得再改一下)</p>
<h5 id="时好时坏的遥控器"><a href="#时好时坏的遥控器" class="headerlink" title="时好时坏的遥控器"></a>时好时坏的遥控器</h5><p>回到了寝室,我赶紧把新的数据放进去,对准空调,发了开机指令……再发一次……再发一次</p>
<p>还是没用？？不过关机指令倒是可以了</p>
<p>这说明发送是可以的,只是内容还有问题.</p>
<p>在网上搜寻了很久的开关机数据,都不太行,这是我想起了那个<code>美的空调遥控指令</code>的库！</p>
<p>之前,我不能使用它,是因为IRRemote中无法使用Linkit One的PWM波发生器,所以如果我改了那个发射函数,不就OK了嘛！</p>
<p>它需要什么方法我就给什么方法,连名字和参数都一样!</p>
<p>VKIRSender.h</p>
<pre><code>class VKIRSender{
public:
    void mark(int time);
    void space(int time);
    void enableIROut(int hz);
};
</code></pre><p>VKIRSender.cpp</p>
<pre><code>#include &quot;VKIRSender.h&quot;
#include &lt;Arduino.h&gt;

#define PWM_PIN 3

void VKIRSender::mark(int time){
    analogWriteAdvance(PWM_PIN,PWM_SOURCE_CLOCK_13MHZ,PWM_CLOCK_DIV1,342,171);
    delayMicroseconds(time);
}

void VKIRSender::space(int time){
    analogWriteAdvance(PWM_PIN,PWM_SOURCE_CLOCK_13MHZ,PWM_CLOCK_DIV1,342,0);
    delayMicroseconds(time);
}

void VKIRSender::enableIROut(int hz){

}
</code></pre><p>在这个库的帮助下,我甚至可以不使用抓来的数据,我甚至可以设定温度,冷热模式,风速……</p>
<p>试验了一下,<code>滴</code>！成功了</p>
<h4 id="TODO"><a href="#TODO" class="headerlink" title="TODO"></a>TODO</h4><p>开发历程差不多就是这样,真的好艰辛～</p>
<p>当然,现在还存在一个比较大的问题,就是发射距离！</p>
<p>我只能在离空调1M的位置,让空调听话,稍微远一点,他就不听话了～</p>
<p>在解决了这个问题之后,就可以配合温湿度传感器,让它智能起来了！</p>
<h4 id="RELEASE"><a href="#RELEASE" class="headerlink" title="RELEASE"></a>RELEASE</h4><p>前面废话那么多,这下面才是最有用的～</p>
<p>代码开源了,其实并没有什么很难得地方,只是由于踩了很多坑,所以我觉得公开给大家伙用用,可能还是蛮好的.</p>
<p>去<a href="https://github.com/VikingWarlock/Linkit-One-Bluetooth-AC-Remoter" target="_blank" rel="noopener">Github</a>看,给个Star当然也是极好的～</p>
<p>接线差不多是这个样子的</p>
<p><img src="http://vvk.ixuanlun.com/linkit_one_irremote_small.jpg" alt="board"></p>

      
    </div>
    
  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/hexosource/categories/programming/">编程</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/hexosource/tags/arduino/">Arduino</a>
    </span>
    

    </div>

    
  </div>
  
    
    
  
</article>
   
    <div id="toc" class="toc-article ">
    <div class="toc-title">目录</div>
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8linkit-one-%E6%8E%A7%E5%88%B6%E7%A9%BA%E8%B0%83"><span class="toc-number">1.</span> <span class="toc-text">使用linkit one 控制空调</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Context"><span class="toc-number">1.1.</span> <span class="toc-text">Context</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#My-Limitation"><span class="toc-number">1.2.</span> <span class="toc-text">My Limitation</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Requirements"><span class="toc-number">1.3.</span> <span class="toc-text">Requirements</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Knowledge"><span class="toc-number">1.4.</span> <span class="toc-text">Knowledge</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%81%A5%E6%8E%A7%E5%99%A8%E5%92%8C%E7%A9%BA%E8%B0%83%E7%9A%84%E9%80%9A%E4%BF%A1"><span class="toc-number">1.4.1.</span> <span class="toc-text">遥控器和空调的通信</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Arduino"><span class="toc-number">1.4.2.</span> <span class="toc-text">Arduino</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%91%E9%80%81%E6%8C%87%E4%BB%A4%EF%BC%8A"><span class="toc-number">1.4.3.</span> <span class="toc-text">发送指令＊</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#PWM-%E8%84%89%E5%86%B2%E5%AE%BD%E5%BA%A6%E8%B0%83%E5%88%B6"><span class="toc-number">1.4.4.</span> <span class="toc-text">PWM(脉冲宽度调制)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Dev"><span class="toc-number">1.5.</span> <span class="toc-text">Dev</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Arduino-IRRemote"><span class="toc-number">1.5.1.</span> <span class="toc-text">Arduino-IRRemote</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%82%E6%83%B3%E5%A4%A9%E5%BC%80%E7%9A%84%E5%81%9A%E6%B3%95"><span class="toc-number">1.5.2.</span> <span class="toc-text">异想天开的做法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E7%94%9F%E6%88%90PWM%EF%BC%81"><span class="toc-number">1.5.3.</span> <span class="toc-text">手动生成PWM！</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%98%E6%9C%89%E8%BF%99%E7%A7%8D%E6%93%8D%E4%BD%9C"><span class="toc-number">1.5.4.</span> <span class="toc-text">还有这种操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#analogWriteAdvance"><span class="toc-number">1.5.5.</span> <span class="toc-text">analogWriteAdvance</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%97%B6%E5%A5%BD%E6%97%B6%E5%9D%8F%E7%9A%84%E9%81%A5%E6%8E%A7%E5%99%A8"><span class="toc-number">1.5.6.</span> <span class="toc-text">时好时坏的遥控器</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#TODO"><span class="toc-number">1.6.</span> <span class="toc-text">TODO</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#RELEASE"><span class="toc-number">1.7.</span> <span class="toc-text">RELEASE</span></a></li></ol></li></ol>
</div>


  

	<!-- async load  -->
	<script>
			function async(u, c) {
				var d = document, t = 'script',
						o = d.createElement(t),
						s = d.getElementsByTagName(t)[0];
				o.src = u;
				if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
				s.parentNode.insertBefore(o, s);
			}
	</script>
	<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
	<script>
			async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
					anchors.options = {
						visible: 'hover',
						placement: 'left',
						// icon: '#'
					};
					anchors.add().remove('.article-title').remove('.subheading').remove('.sidebar-container h5');
			})
	</script>
	<style>
			/* place left on bigger screen */
			@media all and (min-width: 800px) {
					.anchorjs-link{
							position: absolute;
							left: -0.75em;
							font-size: 1.1em;
							margin-top : -0.1em;
					}
			}
	</style>




<!-- UY BEGIN -->
	<div id="gitment-container"></div>
	<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
	<script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
	<script src="/hexosource/js/web-pinyin.js"></script>
	<script>
		function toUnicode(s){ 
			return s.replace(/([\u4E00-\u9FA5]|[\uFE30-\uFFA0])/g,function(){
			return "\\u" + RegExp["$1"].charCodeAt(0).toString(16);
			});
		}
		var title = 'Linkit One 空调遥控器'
		var GitHub_id = 'Boseny'
		var client_id = 'f40c67d0359a2646d2b1'
		var client_secret = '1cbedbd1a1a2e4b42901aee3d7afe1856c1b7e2d'
		var repo = 'boseny.me'
		var gitment = new Gitment({
		// id: '页面 ID', // 可选。默认为 location.href
		// id:"11" ,
		id: title,
		title: title,
		owner: GitHub_id,//'你的 GitHub ID',
		repo: repo,//'存储评论的 repo',
		oauth: {
			client_id: client_id,//'你的 client ID',
			client_secret: client_secret,//'你的 client secret',
		},
		})
		gitment.render('gitment-container')
	</script>
<!-- UY END -->




            </main>
          </div>
        </div>
       
    <footer class="site-footer">
  <p class="site-info">
    Proudly powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and
    Theme by <a href="https://github.com/BosenY/Lap" target="_blank">Lap</a>
    <br/><span id="busuanzi_container_site_uv"> 
  本站访客数<span id="busuanzi_value_site_uv"></span>人次
</span>
    </br>
    
      
        &copy; 2023 Viking Warlock
      
    
  </p>
</footer>
    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-92842840-1', 'auto');
    ga('send', 'pageview');

</script>


  </div>

</div>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="https://cdn.bootcss.com/vue/2.5.13/vue.min.js"></script>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

  <script src="https://unpkg.com/draw-something/dist/draw.min.js"></script>
  <script>
    let maxNum = Number.parseInt('10')
    let iconText = '❤'
    let color = 'red'
    new Draw({maxNum, iconText, color})
  </script>

<script src="/hexosource/js/index.js"></script>
<script src="/hexosource/js/search.js"></script>

</body>
</html>